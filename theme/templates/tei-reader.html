{% extends "base.html" %}
{% block title %}{{ page.title }}{% endblock %}
{% block breadcrumb_title %}{{ page.title }}{% endblock %}
{% block content %}
  <h1>{{ page.title }}</h1>
  {% import 'translations.html' as translations with context %}
  {{ translations.translations_for(page) }}
  <div class="grid-x grid-padding-x">
    <section class="cell small-12 medium-8">
      {{ page.summary }}
      <div class="text-right">
        <button class="button read">Jetzt lesen</button>
      </div>
    </section>
    <aside class="cell small-12 medium-4">
      <dl>
        {% if page.bibl %}
        <dt>Bibliographie</dt>
        <dd>{{ page.bibl }}</dd>
        {% endif %}
        {% if page.authors %}
        <dt>Autor</dt>
        <dd>
          <ul class="no-bullet">
            {% for author in page.authors %}
              <li>{{ author }}</li>
            {% endfor %}
          </ul>
        </dd>
        {% endif %}
        {% if page.editors %}
        <dt>Bearbeiter</dt>
        <dd>
          <ul class="no-bullet">
            {% for editor in page.editors %}
              <li><abbr title="{{ editor.role }}" data-tooltip data-position="bottom" data-alignment="left">{{ editor.name }}</abbr></li>
            {% endfor %}
          </ul>
        </dd>
        {% endif %}
        {% if page.revisions %}
        <dt>Versionen</dt>
        <dd>
          <ul class="no-bullet">
            {% for revision in page.revisions | reverse() %}
              <li class="ellipsis"><abbr title="{{ revision.date }}: {{ revision.revision }} [{{ revision.name | join(', ') }}]" data-tooltip data-position="bottom" data-alignment="left">{{ revision.revision }}</abbr> [{{ revision.name | join(', ') }}]</li>
            {% endfor %}
          </ul>
        </dd>
        {% endif %}
      </dl>
    </aside>
  </div>
  <div class="reveal-overlay">
    <div class="reader">
      <div class="grid-x grid-padding-x cell-block-container">
        <section class="cell fulltext">{{ page.content }}</section>
        <aside class="cell notes"></aside>
      </div>
    </div>
  </div>
  <script>
  $('button.read').on('click', function(ev) {
      ev.preventDefault();
      $('.reveal-overlay').show();
  });
  $('.reveal-overlay').on('click', function(ev) {
      ev.preventDefault();
      $('.reveal-overlay').hide();
  });
  $('.reveal-overlay .reader').on('click', function(ev) {
      ev.preventDefault();
      ev.stopPropagation();
  })
  </script>
{% endblock %}
